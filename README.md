# 🏒 Hockey Game — Single File SPA

**1つの `index.html` だけ**で遊べる、軽快でモダンなエアホッケー風ゲーム。マウス/タッチ/キーボード操作、難易度・サウンド・テーマ切替対応。VS Codeで保存→すぐプレイできます。

> TL;DR: `index.html` を作って貼り付け→ブラウザで開く→青いパドルで白いパックを相手ゴールへ！

---

## 目次

* [デモの起動方法](#デモの起動方法)
* [特徴](#特徴)
* [あそび方](#あそび方)
* [ゲームのルール](#ゲームのルール)
* [難易度と挙動](#難易度と挙動)
* [サウンドとテーマ](#サウンドとテーマ)
* [フォルダ構成](#フォルダ構成)
* [VS Codeでの手順](#vs-codeでの手順)
* [仕組みの概要（やさしい解説）](#仕組みの概要やさしい解説)
* [カスタマイズ](#カスタマイズ)
* [アクセシビリティ](#アクセシビリティ)
* [パフォーマンス](#パフォーマンス)
* [ブラウザ対応](#ブラウザ対応)
* [FAQ](#faq)
* [トラブルシューティング](#トラブルシューティング)
* [今後のアイデア](#今後のアイデア)
* [ライセンス](#ライセンス)

---

## デモの起動方法

**方法A（最短）**

1. このリポジトリ（またはキャンバス）の `index.html` をローカルに保存
2. ダブルクリックでブラウザ（Chrome/Edge/Firefox/Safari）で開く

**方法B（VS Code + Live Server）**

1. VS Code拡張「Live Server」をインストール
2. `index.html` を開いて右下の **Go Live** をクリック
3. ブラウザが自動で開き、編集→保存で即反映

---

## 特徴

* 🗂 **単一ファイル**：HTMLだけ。ビルド・依存関係なし
* 🕹 **直感操作**：マウス/タッチ/キーボード ←→↑↓
* ⚙️ **難易度選択**：やさしい / ふつう / むずかしい
* 🎧 **サウンド**：Web Audioで軽い効果音（ON/OFF可）
* 🌓 **テーマ**：ダーク/ライト切替、モダンで美しいUI
* 📱 **レスポンシブ**：スマホ〜デスクトップまでフィット
* ⏸ **ポーズ/リセット**：Pキーで一時停止、ワンクリックで初期化

---

## あそび方

* **あなた**：青い丸（パドル）
* **CPU**：ピンクの丸
* **パック**：白い丸
* 右側ゴールにパックが入ると **あなたの得点**、左側は **CPUの得点**。
* 操作方法：

  * マウス/タッチ：ドラッグ or マウス移動
  * キーボード：←→↑↓
  * 一時停止：`P` キー

---

## ゲームのルール

* パックは壁やパドルに当たると跳ね返ります
* 各サイドにゴールの“開口部”があり、そこを通ると得点
* 得点後は **3・2・1** カウントダウンののち再開

---

## 難易度と挙動

* **やさしい**：CPUの反応が遅く、ミスが多め
* **ふつう**：バランス型（デフォルト）
* **むずかしい**：CPUがすばやく正確に追う

> CPUはパックの位置を見ながら“狙い位置”を推定して移動します。難易度により**最大速度**・**反応性**・**誤差**が変わります。

---

## サウンドとテーマ

* **サウンド**：右上のトグルでON/OFF。初回は**ユーザー操作後**に音が出ます（ブラウザ仕様）
* **テーマ**：ダーク/ライトをボタンで切替。好みは`localStorage`に保存されます

---

## フォルダ構成

```
project/
└─ index.html   # すべてこの1ファイルに収録
```

---

## VS Codeでの手順

1. `index.html` を新規作成し、ソースを貼り付けて保存
2. （任意）Live Serverで起動→編集→保存でホットリロード
3. エラーが出たら、まず**貼り付け漏れ**と**CSSのセミコロン**を確認

---

## 仕組みの概要（やさしい解説）

* 画面は **`<canvas>`** という“お絵かきボード”に描画
* **メインループ**（毎フレーム）で「入力→物理→当たり判定→描画」の順に処理
* **物理**：パックは位置と速さ（ベクトル）をもち、摩擦で少しずつ減速
* **当たり判定**：パドルとパックが重なったら押し戻し＋向きを反転
* **AI**：パックの現在位置から狙いを少し先読み → CPUパドルをなめらかに移動
* 画面解像度が違っても同じ見た目になるよう、\*\*仮想座標（1000×625）\*\*で計算

---

## カスタマイズ

**色**（CSS変数）

```css
:root {
  --accent: #6de1ff; /* あなた */
  --accent2: #ff7ac6; /* CPU */
}
```

**速度・難易度**（JavaScript）

```js
// プレイヤー最大速度
const maxPaddleSpeed = 680;
// CPUのパラメータ（難易度で上書き）
const AI = { maxSpeed: 360, reaction: 0.24, err: 24 };
```

**ゴール到達での演出**（`scoreGoal()`）

```js
function scoreGoal(who){
  // スコア到達で勝利演出を追加 例: 5点先取
}
```

---

## アクセシビリティ

* **キーボード操作**完備（←→↑↓, P）
* **コントラスト**重視のライトテーマあり
* まぶしい場合はOS/ブラウザの**簡易表示**や**夜間モード**を利用

---

## パフォーマンス

* デバイスの `devicePixelRatio` を上限2にクランプし、コストを抑制
* モバイルで重いと感じたら：

  * 難易度を「やさしい」に
  * 他タブや常駐アプリを閉じる

---

## ブラウザ対応

* 最新版の **Chrome / Edge / Firefox / Safari** で動作
* `backdrop-filter` は一部環境で無効な場合があります（見た目のみの差）

---

## FAQ

**Q. 音が出ません**
A. 初回はユーザー操作が必要です。スタート後にONにしてください。

**Q. 画面が真っ白です**
A. 貼り付け漏れやCSSのタイプミス（セミコロン・コロン）をチェック。`Live Server` の再起動も有効です。

**Q. スマホで操作しづらい**
A. 画面を横向きにしたり、難易度を下げてみてください。

---

## トラブルシューティング

* VS Codeの問題タブに `; が必要` 等のエラー → CSSの行末にセミコロンがあるか確認
* `.panel` のCSSで \`background: backdrop-f
